<!DOCTYPE html>
<html lang="en">
<head>

    <!--  Meta  -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>New Post</title>

    <!--  Styles  -->
    <link rel="stylesheet" href="newpost.css">

    
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        body, h1, h2, h3, h4, h5, h6 {
            font-family: "Raleway", Arial, Helvetica, sans-serif
        }
        .mySlides {display: none}
        </style>

</head>
<body onload="checkSignIn();">
    <div class="header">
        <h1>Hostel</h1>
        <h2>Rent</h2>
    </div>

<div class="topnav">
  <a href="index.html">Home</a>
  <a onclick="goToNewPost()">New post</a>
  <a href="signin.html" id="signin" style="float:right; display:none;">Sign in</a>
  <a href="signup.html" id="signup" style="float:right; display:none;">Sign up</a>
  <a href="index.html" id="signout" style="float:right; display:none;" onclick="requestSignOut()">Sign out</a>
  <a id="welcome" style="float:right; display:none;">Welcome </a>
</div>

    <div class="row">
        <div class="leftcolumn">
            <div class="card">
                <form method="PUT" action="" onsubmit="return getInfo()">
                    <label for="fname">First Name</label>
                    <input class="info" type="text" id="fname" name="firstname" placeholder="Your name..">

                    <label for="lname">Last Name</label>
                    <input class="info" type="text" id="lname" name="lastname" placeholder="Your last name..">

                    <label for="owneraddress">Owner's Address</label>
                    <input class="info" type="text" id="owneraddress" name="owneraddress" placeholder="Address..">

                    <label for="city">Hostel City</label>
                    <select class="info" id="city" name="city">
                        <option value="hanoi">Hanoi</option>
                        <option value="danang">Da Nang</option>
                        <option value="hochiminh">Ho Chi Minh</option>
                    </select>

                    <label for="district">Hostel District</label>
                    <select class="info" id="district" name="district">
                    </select>

                    <label for="street">Hostel Street</label>
                    <select class="info" id="street" name="street">
                    </select>

                    <label for="area">Hostel Area</label>
                    <input class="info" type="number" id="area" name="area" placeholder="Area..." />

                    <label for="maxpeople">Max People</label>
                    <input class="info" type="text" id="maxpeople" name="maxpeople" placeholder="Number of people..." />

                    <label class="container">
                        <input class="info" type="checkbox"> Live With Owner
                        <span class="checkmark"></span>
                    </label>

                    <label for="price">Price</label>
                    <input class="info" type="number" id="price" name="price" placeholder="Price" />

                    <label for="description" style="padding-top:10px; padding-bottom:10px; ">More Description</label>
                    <textarea class="info desBox" id="description" name="description" placeholder="Write something.." style="height:200px; overflow:auto">

                    </textarea>







                    <label style="display:block;" for="phone">Phone Number: </label>
                    <input class="info" type="tel" id="phone" name="phone" placeholder="Your phone number...">

                    <label for="ursemail">Email: </label>
                    <input class="info" type="email" id="ursemail" name="ursemail" placeholder="Your email...">

                    <label for="title">Title </label>
                    <input class="info" type="text" id="title" name="title" placeholder="Title...">

                    <input type="submit" value="Rent your house">


                </form>

            </div>
            


        </div>

    </div>

    <div class="footer">
        <h2>made by GET HIGH TEAM</h2>
    </div>
    <script src="requestor.js"></script>
    <script src="loader.js"></script>
    <script>
    function requestSignOut() {
      requestData(serverURL + "signout", null, responseSignOut, "GET");
    }
    
    function responseSignOut(responseText) {
      checkSignIn();
    }
  </script>
    <script>
        function getInfo() {
            let infoData = document.getElementsByClassName("info");
            let infoObj = {
                Firstname: infoData[0].value,
                Lastname: infoData[1].value,
                OwnerAddress: infoData[2].value,
                City: infoData[3].value,
                District: infoData[4].value,
                Street: infoData[5].value,
                Area: parseInt(infoData[6].value),
                MaxPeople: parseInt(infoData[7].value),
                LiveWithOwner: infoData[8].checked,
                Price: parseInt(infoData[9].value),
                Description: infoData[10].value,
                
                Phone: infoData[11].value,
                Email: infoData[12].value,
                Title: infoData[13].value,
                
            

            }
            requestData(serverURL + "newpost", JSON.stringify(infoObj), responseInfo, "POST");
            
            return false;

        }
        
        function goToNewPost() {
      let welcome = document.getElementById("welcome");

      location.href = (welcome.style.display == "none") ? "signin.html" : "newpost.html";
    }

        function responseInfo(responseText) {
            //alert(responseInfo);
            //let responseObj = JSON.parse(responseText);
            //location.href = "specific.html" + "?id=" + responseObj.PostID;
		location.href = "index.html";
        }
    </script>
</body>
</html>
